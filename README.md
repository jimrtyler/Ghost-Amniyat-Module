# 👻 د Ghost امنیتي ماډول
**د PowerShell پر بنسټ د Windows او Azure د امنیت د پیاوړتیا وسیله**

> **د Windows د پای نقطو او د Azure د چاپیریال لپاره فعاله د امنیت پیاوړتیا.** Ghost د PowerShell پر بنسټ د پیاوړتیا دندې وړاندې کوي چې کولی شي د غیر ضروري خدماتو او پروټوکولونو په ناکاره کولو سره د عامو برید ویکټورونو د کمولو سره مرسته وکړي.

## ⚠️ مهم خبرداری

**ازموینه اړینه ده**: تل د لومړي ځل لپاره د غیر تولیدي چاپیریالونو کې Ghost وازمویاست. د خدماتو ناکاره کول کولی شي د مشروعو سوداګریزو دندو باندې اغیز وکړي.

**هیڅ تضمین نشته**: پداسې حال کې چې Ghost عام د برید ویکټورونه په نښه کوي، هیڅ امنیتي وسیله نشي کولی ټول بریدونه مخنیوی وکړي. دا د جامع امنیتي ستراتیژۍ یوه برخه دی.

**عملیاتي اغیز**: ځینې دندې کولی شي د سیسټم د فعالیت باندې اغیز وکړي. د پلي کولو دمخه هره ترتیبات په دقت سره وګورئ.

**مسلکي ارزونه**: د تولیدي چاپیریالونو لپاره، د امنیت د ماهرانو سره مشوره وکړئ ترڅو ډاډ ترلاسه کړئ چې ترتیبات ستاسو د سازمان له اړتیاوو سره سمون لري.

## 📊 د امنیت منظره

د Ransomware زیان **په 2025 کې 57 بیلیون ډالرو ته ورسیدل**، د څیړنو ښودلي چې ډیری بریالي بریدونه د Windows د بنسټیزو خدماتو او غلطو تنظیماتو څخه ګټه پورته کوي. عام د برید ویکټورونه پکې شامل دي:

- **د ransomware د پیښو 90%** د RDP د ګټه اخیستنې پکې شامل دي
- **د SMBv1 زیانمنۍ** د WannaCry او NotPetya په څیر بریدونه فعال کړل
- **د سندونو میکروګانې** د مالویر د رسولو لومړنۍ طریقه پاتې دي
- **د USB پر بنسټ بریدونه** د هوا د تشې شبکو په نښه کولو ته دوام ورکوي
- **د PowerShell ناوړه ګټه اخیستنه** پدې وروستیو کلونو کې د پام وړ زیاتوالی لیدلی

## 🛡️ د Ghost امنیتي دندې

Ghost **16 د Windows د پیاوړتیا دندې** او **د Azure د امنیت یوځای کول** وړاندې کوي:

### د Windows د پای نقطې پیاوړتیا

| دنده | موخه | پام |
|----------|---------|----------------|
| `Set-RDP` | د Remote Desktop لاسرسی اداره کوي | کولی شي د لیرې ادارې باندې اغیز وکړي |
| `Set-SMBv1` | د زړ SMB پروټوکول کنټرول کوي | د خورا زړو سیسټمونو لپاره اړین |
| `Set-AutoRun` | AutoPlay/AutoRun کنټرول کوي | کولی شي د کاروونکي د اسانتیا باندې اغیز وکړي |
| `Set-USBStorage` | د USB د ذخیره کولو وسایل محدود کوي | کولی شي د مشروعو USB کارونې باندې اغیز وکړي |
| `Set-Macros` | د Office د میکرو اجرا کنټرول کوي | کولی شي د میکرو فعالو سندونو باندې اغیز وکړي |
| `Set-PSRemoting` | د PowerShell د لیرې کولو اداره کوي | کولی شي د لیرې ادارې باندې اغیز وکړي |
| `Set-WinRM` | د Windows Remote Management کنټرول کوي | کولی شي د لیرې ادارې باندې اغیز وکړي |
| `Set-LLMNR` | د نوم د حل کولو پروټوکول اداره کوي | عموماً د ناکاره کولو لپاره خوندي |
| `Set-NetBIOS` | د TCP/IP په NetBIOS کنټرول کوي | کولی شي د زړو غوښتنلیکونو باندې اغیز وکړي |
| `Set-AdminShares` | اداري شریکولونه اداره کوي | کولی شي د لیرې دوتنې لاسرسي باندې اغیز وکړي |
| `Set-Telemetry` | د معلوماتو راټولول کنټرول کوي | کولی شي د تشخیصي ظرفیتونو باندې اغیز وکړي |
| `Set-GuestAccount` | د میلمه حساب اداره کوي | عموماً د ناکاره کولو لپاره خوندي |
| `Set-ICMP` | د ping ځوابونه کنټرول کوي | کولی شي د شبکې تشخیص باندې اغیز وکړي |
| `Set-RemoteAssistance` | Remote Assistance اداره کوي | کولی شي د مرستې دفتر عملیاتو باندې اغیز وکړي |
| `Set-NetworkDiscovery` | د شبکې موندنه کنټرول کوي | کولی شي د شبکې لیدلو باندې اغیز وکړي |
| `Set-Firewall` | د Windows Firewall اداره کوي | د شبکې امنیت لپاره خورا مهم |

### د Azure د بادل امنیت

| دنده | موخه | اړتیاوې |
|----------|---------|--------------|
| `Set-AzureSecurityDefaults` | د Azure AD بنسټیز امنیت فعالوي | د Microsoft Graph اجازې |
| `Set-AzureConditionalAccess` | د لاسرسي پالیسۍ تنظیموي | د Azure AD P1/P2 جواز ورکول |
| `Set-AzurePrivilegedUsers` | د امتیازاتو حسابونه وارزوي | د Global Admin اجازې |

### د سوداګرۍ د ویشلو اختیارونه

| طریقه | د کارولو قضیه | اړتیاوې |
|--------|----------|--------------|
| **مستقیم اجرا** | ازموینه، کشر چاپیریالونه | د سیمه ایز ادمین حقونه |
| **Group Policy** | د ډومین چاپیریالونه | د ډومین ادمین، GP اداره |
| **Microsoft Intune** | د بادل اداره شوي وسایل | د Intune جواز ورکول، Graph API |

## 🚀 ګړندي پیل

### د امنیت ارزونه
```powershell
# د Ghost ماډول بار کړئ
IEX(Invoke-WebRequest 'https://raw.githubusercontent.com/jimrtyler/Ghost/main/Ghost.ps1')

# د اوسني امنیتي موقف وګورئ
Get-Ghost
```

### بنسټیز پیاوړتیا (لومړی وازمویاست)
```powershell
# اړین پیاوړتیا - لومړی د لابراتوار چاپیریال کې وازمویاست
Set-Ghost -SMBv1 -AutoRun -Macros

# بدلونونه وګورئ
Get-Ghost
```

### د سوداګرۍ ویشل
```powershell
# د Group Policy ویشل (د ډومین چاپیریالونه)
Set-Ghost -SMBv1 -AutoRun -GroupPolicy

# د Intune ویشل (د بادل اداره شوي وسایل)
Set-Ghost -SMBv1 -RDP -USBStorage -Intune
```

## 📋 د نصب طریقې

### اختیار 1: مستقیم ډاونلوډ (ازموینه)
```powershell
IEX(Invoke-WebRequest 'https://raw.githubusercontent.com/jimrtyler/Ghost/main/Ghost.ps1')
```

### اختیار 2: د ماډول نصب
```powershell
# د PowerShell Gallery څخه نصب کړئ (کله چې شتون ولري)
Install-Module Ghost -Scope CurrentUser
Import-Module Ghost
```

### اختیار 3: د سوداګرۍ ویشل
```powershell
# د Group Policy د ویشلو لپاره شبکې ته کاپي کړئ
# د بادل د ویشلو لپاره د Intune PowerShell سکریپټونه تنظیم کړئ
```

## 💼 د کارولو قضیې بیلګې

### کشر سوداګري
```powershell
# د کمې اغیزې سره بنسټیز محافظت
Set-Ghost -SMBv1 -AutoRun -Macros -ICMP
```

### د روغتیا پاملرنې چاپیریال
```powershell
# د HIPAA متمرکز پیاوړتیا
Set-Ghost -SMBv1 -RDP -USBStorage -AdminShares -Telemetry
```

### مالي خدمات
```powershell
# د لوړ امنیت ترتیبات
Set-Ghost -RDP -SMBv1 -AutoRun -USBStorage -Macros -PSRemoting -AdminShares
```

### د بادل-لومړني سازمان
```powershell
# د Intune اداره شوي ویشل
Connect-IntuneGhost -Interactive
Set-Ghost -SMBv1 -RDP -AutoRun -Macros -Intune
```

## 🔍 د دندې تفصیلات

### اصلي د پیاوړتیا دندې

#### د شبکې خدمات
- **RDP**: د لیرې ډیسکټاپ لاسرسی بند کوي یا پورټ تصادفي کوي
- **SMBv1**: د زړ دوتنې د شریکولو پروټوکول ناکاره کوي
- **ICMP**: د سپکاوي لپاره د ping ځوابونه مخنیوی کوي
- **LLMNR/NetBIOS**: د زړو نوم د حل کولو پروټوکولونه بند کوي

#### د غوښتنلیک امنیت
- **میکروګانې**: په Office غوښتنلیکونو کې د میکرو اجرا ناکاره کوي
- **AutoRun**: د لیرې کیدونکو رسنیو څخه د اتوماتیک اجرا مخنیوی کوي

#### د لیرې اداره
- **PSRemoting**: د PowerShell لیرې غونډې ناکاره کوي
- **WinRM**: د Windows Remote Management ودروي
- **Remote Assistance**: د لیرې مرستې اتصالات بند کوي

#### د لاسرسي کنټرول
- **Admin Shares**: C$، ADMIN$ شریکولونه ناکاره کوي
- **Guest Account**: د میلمه حساب لاسرسی ناکاره کوي
- **USB Storage**: د USB وسایلو کارول محدود کوي

### د Azure یوځای کول
```powershell
# د Azure د کورایانو سره اتصال
Connect-AzureGhost -Interactive

# د امنیت ډیفالټونه فعال کړئ
Set-AzureSecurityDefaults -Enable

# شرطي لاسرسی تنظیم کړئ
Set-AzureConditionalAccess -BlockLegacyAuth -RequireMFA

# د امتیازاتو کاروونکي وارزوئ
Set-AzurePrivilegedUsers -AuditOnly
```

### د Intune یوځای کول (په v2 کې نوی)
```powershell
# د Intune سره اتصال
Connect-IntuneGhost -Interactive

# د Intune پالیسیو له لارې ویشل
Set-IntuneGhost -Settings @{
    RDP = $true
    SMBv1 = $true
    USBStorage = $true
    Macros = $true
}
```

## ⚠️ مهم پامونه

### د ازموینې اړتیاوې
- **د لابراتوار چاپیریال**: لومړی ټول ترتیبات په جلا چاپیریال کې وازمویاست
- **پړاو پړاو ویشل**: د ستونزو د پیژندلو لپاره ورو ورو رول آوټ وکړئ
- **د بیرته راستنیدو پلان**: ډاډ ترلاسه کړئ چې تاسو کولی شئ بدلونونه بیرته واړوئ که اړین وي
- **مستندات**: ثبت کړئ چې کوم ترتیبات ستاسو د چاپیریال لپاره کار کوي

### احتمالي اغیز
- **د کاروونکي تولید**: ځینې ترتیبات کولی شي د ورځني د کار جریان باندې اغیز وکړي
- **زړ غوښتنلیکونه**: زړ سیسټمونه کولی شي ځانګړي پروټوکولونو ته اړتیا ولري
- **د لیرې لاسرسی**: د مشروعو لیرې ادارې باندې د اغیز په اړه فکر وکړئ
- **سوداګریز پروسیجرونه**: تأیید کړئ چې ترتیبات مهم دندې نه ماتوي

### د امنیت محدودیتونه
- **د ژورو دفاع**: Ghost د امنیت یوه پوښ دی، بشپړ حل نه
- **دوامداره اداره**: امنیت د دوامداره څارنې او تازه کولو ته اړتیا لري
- **د کاروونکي روزنه**: تخنیکي کنټرول باید د امنیت د پوهاوي سره یوځای شي
- **د ګواښ وده**: د برید نوې طریقې کولی شي اوسني محافظت تیر کړي

## 🎯 د برید د سناریو بیلګې

پداسې حال کې چې Ghost عام د برید ویکټورونه په نښه کوي، ځانګړي مخنیوی د سمې پلي کولو او ازموینې پورې اړه لري:

### د WannaCry ډول بریدونه
- **د کمولو**: `Set-Ghost -SMBv1` زیانمن پروټوکول ناکاره کوي
- **پامونه**: ډاډ ترلاسه کړئ چې هیڅ زړ سیسټم SMBv1 ته اړتیا نلري

### د RDP پر بنسټ Ransomware
- **د کمولو**: `Set-Ghost -RDP` د لیرې ډیسکټاپ لاسرسی بند کوي
- **پامونه**: کولی شي د بدیلو لیرې لاسرسي طریقو ته اړتیا ولري

### د سند پر بنسټ Malware
- **د کمولو**: `Set-Ghost -Macros` د میکرو اجرا ناکاره کوي
- **پامونه**: کولی شي د مشروعو میکرو فعالو سندونو باندې اغیز وکړي

### د USB رسول شوي ګواښونه
- **د کمولو**: `Set-Ghost -USBStorage -AutoRun` د USB فعالیت محدود کوي
- **پامونه**: کولی شي د مشروعو USB وسایلو کارولو باندې اغیز وکړي

## 🏢 د سوداګرۍ ځانګړتیاوې

### د Group Policy ملاتړ
```powershell
# د Group Policy د راجسټر له لارې ترتیبات پلي کړئ
Set-Ghost -SMBv1 -RDP -AutoRun -GroupPolicy

# د GP د تازه کولو وروسته د ډومین پراخ ترتیبات پلي کیږي
gpupdate /force
```

### د Microsoft Intune یوځای کول
```powershell
# د Ghost ترتیباتو لپاره د Intune پالیسۍ جوړ کړئ
Set-IntuneGhost -Settings $GhostSettings -Interactive

# پالیسۍ په خپلکاره ډول اداره شویو وسایلو ته ویشل کیږي
```

### د تعمیل راپور ورکول
```powershell
# د امنیت د ارزونې راپور تولید کړئ
Get-Ghost | Export-Csv -Path "SecurityAudit-$(Get-Date -Format 'yyyy-MM-dd').csv"

# د Azure د امنیت د موقف راپور
Get-AzureGhost | Out-File "AzureSecurityReport.txt"
```

## 📚 غوره تمرینونه

### د ویشلو دمخه
1. **اوسنی حالت مستند کړئ**: د بدلونونو دمخه `Get-Ghost` وکاروئ
2. **په دقت سره وازمویاست**: په غیر تولیدي چاپیریال کې تأیید کړئ
3. **د بیرته راستنیدو پلان**: پوه شئ چې هر ترتیب څنګه بیرته واړوئ
4. **د ګډونوالو بیاکتنه**: ډاډ ترلاسه کړئ چې سوداګریز واحدونه بدلونونه تصویبوي

### د ویشلو پر مهال
1. **پړاو پړاو چلند**: لومړی د پایلوټ ګروپونو ته ویشل
2. **د اغیز څارنه**: د کاروونکي شکایتونو یا سیسټم ستونزو ته وګورئ
3. **ستونزې مستند کړئ**: د راتلونکې حوالې لپاره کومې ستونزې ثبت کړئ
4. **بدلونونه اطلاع ورکړئ**: د امنیت پرمختګونو په اړه کاروونکو ته خبر ورکړئ

### د ویشلو وروسته
1. **منظم ارزونه**: د ترتیباتو د تأیید لپاره وخت په وخت `Get-Ghost` وکاروئ
2. **مستندات تازه کړئ**: اوسني د امنیت ترتیبات وساتئ
3. **د اغیزمنتیا بیاکتنه**: د امنیتي پیښو لپاره څارنه وکړئ
4. **دوامداره پرمختګ**: د ګواښ د منظرې پر بنسټ ترتیبات تنظیم کړئ

## 🔧 د ستونزو حل

### عام ستونزې
- **د اجازې تیروتنې**: د لوړ PowerShell غونډې ډاډ ترلاسه کړئ
- **د خدماتو تړون**: ځینې خدمات کولی شي تړون ولري
- **د غوښتنلیک سازګارتیا**: د سوداګریزو غوښتنلیکونو سره وازمویاست
- **د شبکې اتصال**: تأیید کړئ چې د لیرې لاسرسی لاهم کار کوي

### د بیرته راستنیدو اختیارونه
```powershell
# که اړین وي ځانګړي خدمات بیرته فعال کړئ
Set-RDP -Enable
Set-SMBv1 -Enable
Set-AutoRun -Enable
Set-Macros -Enable
```

## 👨‍💻 د لیکوال په اړه

**Jim Tyler** - د PowerShell لپاره د Microsoft MVP
- **YouTube**: [@PowerShellEngineer](https://youtube.com/@PowerShellEngineer) (10,000+ پیروان)
- **خبرپاڼه**: [PowerShell.News](https://powershell.news) - اونیز د امنیت استخبارات
- **لیکوال**: "PowerShell for Systems Engineers"
- **تجربه**: د PowerShell د اتوماتیک کولو او د Windows امنیت لسیزې

## 📄 جواز او انکار

### د MIT جواز
Ghost د وړیا کارولو، بدلولو او ویشلو لپاره د MIT جواز لاندې وړاندې کیږي.

### د امنیت انکار
- **هیڅ تضمین نشته**: Ghost "لکه څنګه چې دی" د هر ډول تضمین پرته وړاندې کیږي
- **ازموینه اړینه ده**: تل لومړی په غیر تولیدي چاپیریالونو کې وازمویاست
- **مسلکي لارښودنه**: د تولیدي ویشلو لپاره د امنیت د مسلکیانو سره مشوره وکړئ
- **عملیاتي اغیز**: لیکوالان د هر ډول عملیاتي ګډوډۍ لپاره مسؤل نه دي
- **جامع امنیت**: Ghost د بشپړ امنیتي ستراتیژۍ یوه برخه دی

### ملاتړ
- **د GitHub مسلې**: [بګونه راپور ورکړئ یا ځانګړتیاوې وغواړئ](https://github.com/jimrtyler/Ghost/issues)
- **مستندات**: د تفصیلي مرستې لپاره `Get-Help <function> -Full` وکاروئ
- **ټولنه**: د PowerShell او امنیت د ټولنې فورمونه

---

**🔒 د Ghost سره خپل امنیتي موقف پیاوړی کړئ - مګر تل لومړی وازمویاست.**

```powershell
# د انګیرنو سره نه، د ارزونې سره پیل وکړئ
Get-Ghost
```

**⭐ دې ذخیرې ته ستوری ورکړئ که چیرې Ghost ستاسو د امنیت موقف ښه کولو سره مرسته کوي!**